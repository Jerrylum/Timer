"use strict";var vi=new Vue({el:"#thebody",mounted:function(){var t=this,e=getCookie();this.theme=e.theme||this.theme,e.timer_mode&&("countdown"==e.timer_mode?(this.t=new CountdownTimer,this.t._totalTicks=Math.trunc(e.timer_total_ticks)||0):(this.t=new StopwatchTimer,this.t._initTicks=Math.trunc(e.timer_init_ticks)||0),this.t._startTick=Math.trunc(e.timer_start_tick)||null,this.t._previousTicks=Math.trunc(e.timer_previous_ticks)||0),setInterval(function(){vi.t&&vi.t.__ob__.dep.notify()},1),getAllEditableTimeValueField().forEach(function(e){e.addEventListener("focus",t.focusTimeValueFieldEvent,!1),e.addEventListener("blur",t.blurTimeValueFieldEvent,!1),e.addEventListener("beforeinput",t.b4changedTimeValueFieldEvent,!1),e.addEventListener("input",t.changedTimeValueFieldEvent,!1)})},data:{theme:"dark",themesList:["dark","light"],isHideOptional:!1,t:new CountdownTimer,timerEditingFlag:{hour:!1,minute:!1,second:!1,msec:!1}},watch:{"t._previousTicks":function(){this.updateTimerCookie()},"t._startTick":function(){this.updateTimerCookie()},theme:{handler:function(){document.body.className=this.theme,setCookie({theme:this.theme})},immediate:!0},isHideOptional:function(){document.body.style.cursor=this.isHideOptional?"none":""},timeS:function(){document.title="".concat(vi.timeH,":").concat(vi.timeM,":").concat(vi.timeS)}},methods:{BodyKeyDownEvent:function(t){if(("Tab"===t.key||"Enter"===t.key)&&t.target.id in getTimerData()){t.preventDefault();var e=t.target,i=getAllEditableTimeValueField(),n=i[(i.indexOf(e)+1)%i.length];e.blur(),n.focus()}},BodyMouseMoveEvent:function(t){this.isHideOptional&&(t.movementX>1||t.movementY>1)&&(this.isHideOptional=!1)},clickBtn1Event:function(){if(this.t.status==TimerStatus.INIT){if(0==this.t.displayTicks)this.t=new StopwatchTimer;else{var t=this.t.displayTicks;this.t=new CountdownTimer,this.t.set(t)}this.t.start()}else this.t.status==TimerStatus.RUNNING?this.t.stop():this.t.status==TimerStatus.PAUSE&&this.t.start()},clickBtn2Event:function(){this.t.status==TimerStatus.INIT?(this.t.set(0),this.updateTimerCookie()):this.t.reset()},updateEditableDataAndHtml:function(t,e){"hour"===t.id?e=Math.max(0,Math.min(e,99)):"minute"===t.id?e=Math.max(0,Math.min(e,59)):"second"===t.id?e=Math.max(0,Math.min(e,59)):"msec"===t.id&&(e=Math.max(0,Math.min(e,999))),t.innerText=e;var i=getTimerData(),n=i.hour,s=i.minute,a=i.second,r=i.msec;this.t.set(n,s,a,r)},focusTimeValueFieldEvent:function(t){var e=t.target;this.timerEditingFlag[e.id]=!0,e.beforeFocus=e.innerText},blurTimeValueFieldEvent:function(t){var e=t.target,i=e.innerText,n=Math.trunc(i);this.timerEditingFlag[e.id]=!1,(0==i.length||isNaN(n)||-1!==i.indexOf("."))&&(n=Math.trunc(e.beforeFocus)),this.updateEditableDataAndHtml(e,n)},b4changedTimeValueFieldEvent:function(t){t.target.beforeInput=t.target.innerText},changedTimeValueFieldEvent:function(t){var e=window.getSelection(),i=e.getRangeAt(0).startOffset,n=t.target,s=n.innerText;0==s.length&&(s=n.innerText="0"),s="msec"==n.id?s.slice(0,3):s.slice(0,2);var a=Math.trunc(s);(isNaN(a)||-1!==s.indexOf("."))&&(a=Math.trunc(n.beforeInput)),this.updateEditableDataAndHtml(n,a);var r=document.createRange();r.setStart(n.childNodes[0],Math.min(n.innerText.length,i)),r.collapse(!0),e.removeAllRanges(),e.addRange(r)},updateTimerCookie:function(){setCookie({timer_mode:this.t instanceof CountdownTimer?"countdown":"stopwatch",timer_start_tick:this.t._startTick,timer_previous_ticks:this.t._previousTicks,timer_init_ticks:this.t._initTicks,timer_total_ticks:this.t._totalTicks})}},computed:{displayTicks:function(){return t.displayTicks},timeH:function(){if(this.timerEditingFlag.hour)return"";var t=Math.trunc(this.t.displayTicks/36e5);return(t%=100)>9?t+"":"0"+t},timeM:function(){if(this.timerEditingFlag.minute)return"";var t=Math.trunc(this.t.displayTicks%36e5/6e4);return t>9?t+"":"0"+t},timeS:function(){if(this.timerEditingFlag.second)return"";var t=Math.trunc(this.t.displayTicks%6e4/1e3);return t>9?t+"":"0"+t},timeMS:function(){if(this.timerEditingFlag.msec)return"";var t=Math.trunc(this.t.displayTicks%1e3);return this.t.status==TimerStatus.INIT&&0==t?"000":t},isBtn1Disabled:function(){return this.t instanceof CountdownTimer&&this.t.status==TimerStatus.TIMESUP},getBtn1Warning:function(){return this.t.status==TimerStatus.TIMESUP?lang.times_up_blocked_warning:""},getBtn1Message:function(){return this.t.status==TimerStatus.RUNNING?lang.pause:lang.start},getBtn2Message:function(){return this.t.status==TimerStatus.INIT?lang.clear:lang.reset},isEditable:function(){return this.t.status==TimerStatus.INIT||this.t.status==TimerStatus.PAUSE}}});