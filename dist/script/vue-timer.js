"use strict";var vueTimer=new Vue({el:"#thebody",mounted:function(){var t=this;i18n.addComponent(this);var i=getCookie();i.timer_mode&&("countdown"==i.timer_mode?(this.t=new CountdownTimer,this.t._totalTicks=Math.trunc(i.timer_total_ticks)||0):(this.t=new StopwatchTimer,this.t._initTicks=Math.trunc(i.timer_init_ticks)||0),this.t._startTick=Math.trunc(i.timer_start_tick)||null,this.t._previousTicks=Math.trunc(i.timer_previous_ticks)||0),setInterval(function(){t.t&&t.t.__ob__.dep.notify()},1),getAllEditableTimeValueField().forEach(function(i){i.addEventListener("focus",t.focusTimeValueFieldEvent,!1),i.addEventListener("blur",t.blurTimeValueFieldEvent,!1),i.addEventListener("beforeinput",t.b4changedTimeValueFieldEvent,!1),i.addEventListener("input",t.changedTimeValueFieldEvent,!1)})},data:{t:new CountdownTimer,timerEditingFlag:{hour:!1,minute:!1,second:!1,msec:!1}},watch:{"t._previousTicks":function(){this.updateTimerCookie()},"t._startTick":function(){this.updateTimerCookie()},timeS:function(){document.title="".concat(this.timeH,":").concat(this.timeM,":").concat(this.timeS)}},methods:{BodyKeyDownEvent:function(t){if(("Tab"===t.key||"Enter"===t.key)&&t.target.id in getTimerData()){t.preventDefault();var i=t.target,e=getAllEditableTimeValueField(),n=e[(e.indexOf(i)+1)%e.length];i.blur(),n.focus()}},clickBtn1Event:function(){if(this.t.status==TimerStatus.INIT){if(0==this.t.displayTicks)this.t=new StopwatchTimer;else{var t=this.t.displayTicks;this.t=new CountdownTimer,this.t.set(t)}this.t.start()}else this.t.status==TimerStatus.RUNNING?this.t.stop():this.t.status==TimerStatus.PAUSE&&this.t.start()},clickBtn2Event:function(){this.t.status==TimerStatus.INIT?(this.t.set(0),this.updateTimerCookie()):this.t.reset()},updateEditableDataAndHtml:function(t,i){"hour"===t.id?i=Math.max(0,Math.min(i,99)):"minute"===t.id?i=Math.max(0,Math.min(i,59)):"second"===t.id?i=Math.max(0,Math.min(i,59)):"msec"===t.id&&(i=Math.max(0,Math.min(i,999))),t.innerText=i;var e=getTimerData(),n=e.hour,s=e.minute,a=e.second,r=e.msec;this.t.set(n,s,a,r)},focusTimeValueFieldEvent:function(t){var i=t.target;this.timerEditingFlag[i.id]=!0,i.beforeFocus=i.innerText},blurTimeValueFieldEvent:function(t){var i=t.target,e=i.innerText,n=Math.trunc(e);this.timerEditingFlag[i.id]=!1,(0==e.length||isNaN(n)||-1!==e.indexOf("."))&&(n=Math.trunc(i.beforeFocus)),this.updateEditableDataAndHtml(i,n)},b4changedTimeValueFieldEvent:function(t){t.target.beforeInput=t.target.innerText},changedTimeValueFieldEvent:function(t){var i=window.getSelection(),e=i.getRangeAt(0).startOffset,n=t.target,s=n.innerText;0==s.length&&(s=n.innerText="0"),s="msec"==n.id?s.slice(0,3):s.slice(0,2);var a=Math.trunc(s);(isNaN(a)||-1!==s.indexOf("."))&&(a=Math.trunc(n.beforeInput)),this.updateEditableDataAndHtml(n,a);var r=document.createRange();r.setStart(n.childNodes[0],Math.min(n.innerText.length,e)),r.collapse(!0),i.removeAllRanges(),i.addRange(r)},updateTimerCookie:function(){setCookie({timer_mode:this.t instanceof CountdownTimer?"countdown":"stopwatch",timer_start_tick:this.t._startTick,timer_previous_ticks:this.t._previousTicks,timer_init_ticks:this.t._initTicks,timer_total_ticks:this.t._totalTicks})}},computed:{displayTicks:function(){return t.displayTicks},timeH:function(){if(this.timerEditingFlag.hour)return"";var t=Math.trunc(this.t.displayTicks/36e5);return(t%=100)>9?t+"":"0"+t},timeM:function(){if(this.timerEditingFlag.minute)return"";var t=Math.trunc(this.t.displayTicks%36e5/6e4);return t>9?t+"":"0"+t},timeS:function(){if(this.timerEditingFlag.second)return"";var t=Math.trunc(this.t.displayTicks%6e4/1e3);return t>9?t+"":"0"+t},timeMS:function(){if(this.timerEditingFlag.msec)return"";var t=Math.trunc(this.t.displayTicks%1e3);return this.t.status==TimerStatus.INIT&&0==t?"000":t},isBtn1Disabled:function(){return this.t instanceof CountdownTimer&&this.t.status==TimerStatus.TIMESUP},getBtn1Warning:function(){return this.t.status==TimerStatus.TIMESUP?lang.times_up_blocked_warning:""},getBtn1Message:function(){return this.t.status==TimerStatus.RUNNING?lang.pause:lang.start},getBtn2Message:function(){return this.t.status==TimerStatus.INIT?lang.clear:lang.reset},isEditable:function(){return this.t.status==TimerStatus.INIT||this.t.status==TimerStatus.PAUSE}}});